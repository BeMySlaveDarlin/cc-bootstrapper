---
name: "memory"
description: "Трёхуровневая система памяти проекта"
user-invocable: false
---

# Skill: Memory — Трёхуровневая система памяти проекта

## Уровни

### 1. Facts (`memory/facts.md`)
Текущие факты проекта: стек, пути, активные решения, известные проблемы.
- Обновляется агентами после значимых изменений
- Читается ПЕРВЫМ при старте любой задачи
- Один файл, компактный, актуальный

### 2. Decisions (`memory/decisions/`)
Архитектурные решения в формате ADR-lite.
- Файл: `{YYYY-MM-DD}-{slug}.md`
- Содержит: контекст, решение, альтернативы, последствия
- Записывается Architect при планировании, пайплайнами в фазе CAPTURE
- Максимум 20 активных, остальные в archive

### 3. Archive (`memory/decisions/archive/`)
Устаревшие decisions (старше 30 дней или вытесненные).
- Автоматическая ротация через `maintain-memory.sh`
- Доступны для поиска при необходимости

## Формат Decision

```
# Decision: {title}

**Date:** {YYYY-MM-DD}
**Status:** active | superseded | deprecated
**Author:** {agent}

## Context
{Почему возник вопрос}

## Decision
{Что решили}

## Alternatives
{Что рассматривали}

## Consequences
{Что это означает для проекта}
```

## Правила записи
- Пиши decision только для архитектурно-значимых решений (не для каждого бага)
- Обновляй facts.md после каждого нового decision
- Не дублируй информацию между facts и decisions
- Slug в имени файла — kebab-case, 3-5 слов максимум

## Правила чтения
- Агент ВСЕГДА читает `facts.md` перед началом работы
- Decisions читаются при планировании (Architect) и ревью (Reviewer)
- Archive читается только при явном поиске контекста

## Антипаттерны
- Записывать каждое мелкое изменение как decision
- Дублировать код или конфиги в facts.md
- Игнорировать facts.md при старте задачи
- Оставлять устаревшие facts без обновления
